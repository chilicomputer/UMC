(function(e,b){function f(){}"undefined"===typeof UMC&&(UMC={},"undefined"!==typeof e&&(e.UMC=UMC));var k=[],j=1,n=function(a){return a=Array.prototype.slice.call(a,0)};UMC.inc=function(){return!0};UMC.register=function(a,c){for(var d=a.split("."),b=UMC,e=null;e=d.shift();)if(d.length)void 0===b[e]&&(b[e]={}),b=b[e];else if(void 0===b[e])try{b[e]=c(UMC)}catch(f){}};UMC.E=function(a){return"string"===typeof a?b.getElementById(a):a};UMC.C=function(a){a=a.toUpperCase();return"TEXT"==a?b.createTextNode(""):
"BUFFER"==a?b.createDocumentFragment():b.createElement(a)};UMC.query=function(a,c){a=a.trim();void 0===c&&(c=b);return"#"===a[0]&&-1===a.indexOf(" ")&&-1===a.indexOf(">")?c==b?c.getElementById(a.replace("#","")):n(c.querySelectorAll(a)):n(c.querySelectorAll(a))};UMC.log=function(a){k.push("["+(new Date).toString()+"]: "+a)};UMC.getErrorLogInformationList=function(a){return k.splice(0,a||k.length)};UMC.trim=function(a){if("string"!==typeof a)throw"trim need a string as parameter";for(var c=a.length,
d=0,b=/(\u3000|\s|\t|\u00A0)/;d<c&&b.test(a.charAt(d));)d+=1;for(;c>d&&b.test(a.charAt(c-1));)c-=1;return a.slice(d,c)};UMC.addClassName=function(a,c){1===a.nodeType&&!UMC.hasClassName(a,c)&&(a.className=UMC.trim(a.className)+" "+c)};UMC.removeClassName=function(a,c){1===a.nodeType&&UMC.hasClassName(a,c)&&(a.className=a.className.replace(RegExp("(^|\\s)"+c+"($|\\s)")," "))};UMC.hasClassName=function(a,c){return RegExp("(^|\\s)"+c+"($|\\s)").test(a.className)};UMC.toggleClassName=function(a,c){UMC.hasClassName(a,
c)?UMC.removeClassName(a,c):UMC.addClassName(a,c)};UMC.addEvent=function(a,c,d,b){a=UMC.E(a);if(null==a||"function"!=typeof d)return!1;a.addEventListener(c,d,b);return!0};UMC.removeEvent=function(a,c,d,b){a=$.E(a);if(null==a||"function"!=typeof d)return!1;a.removeEventListener(c,d,b);return!0};UMC.fireEvent=function(a,c){var d=UMC.E(a),e=b.createEvent("HTMLEvents");e.initEvent(c,!0,!0);d.dispatchEvent(e)};UMC.delegatedEvent=function(){};UMC.queryToJson=function(a){if("string"===UMC.getType(a)){a=
a.split("&");for(var c={},d=0,b=a.length;d<b;d++)if(a[d]){var e=a[d].split("="),f=e[0],g=e[1];2>e.length&&(g=f,f="$nullName");c[f]?("array"!==$.getType(c[f])&&(c[f]=[c[f]]),c[f].push(decodeURIComponent(g))):c[f]=decodeURIComponent(g)}return c}};UMC.isEmptyObj=function(a,c){var d=!0,b;for(b in a)if(c){d=!1;break}else if(a.hasOwnProperty(b)){d=!1;break}return d};UMC.insertElement=function(a,c,d){a=UMC.E(a)||b.body;d=d?d.toLowerCase():"beforeend";switch(d){case "beforebegin":a.parentNode.insertBefore(c,
a);break;case "afterbegin":a.insertBefore(c,a.firstChild);break;case "beforeend":a.appendChild(c);break;case "afterend":a.nextSibling?a.parentNode.insertBefore(c,a.nextSibling):a.parentNode.appendChild(c)}};UMC.domReady=function(a){"complete"===b.readyState||"loaded"===b.readyState||!UMC.os.ie&&"interactive"===b.readyState?a():b.addEventListener("DOMContentLoaded",a,!1)};UMC.getType=function(a){var c;return("object"==(c=typeof a)?null==a&&"null"||Object.prototype.toString.call(a).slice(8,-1):c).toLowerCase()};
UMC.each=function(a,c){if("array"===UMC.getType(a)){for(var d=[],b=0,e=a.length;b<e;b+=1){var f=c(a[b],b);if(!1===f)break;else null!==f&&(d[b]=f)}return d}if("object"===UMC.getType(a)){d={};for(b in a)if(f=c(a[b],b),!1===f)break;else null!==f&&(d[b]=f);return d}return null};var l={};UMC.param=function(a,c){var d=[],b;for(b in a){var e=c?c+"["+b+"]":b,f=a[b];d.push("object"===UMC.getType(f)?UMC.param(f,e):e+"="+encodeURIComponent(f))}return d.join("&")};UMC.parseParam=function(a,c,d){var b,e={};c=
c||{};for(b in a)e[b]=a[b],null!=c[b]&&(d?a.hasOwnProperty[b]&&(e[b]=c[b]):e[b]=c[b]);return e};var m={method:"GET",beforeSend:f,onSuccess:f,onError:f,onComplete:f,context:void 0,timeout:3E4,responseType:"json"};UMC.jsonP=function(a){var c="jsonp_callback"+ ++j,d="",f=b.getElementsByTagName("head")[0],g=b.createElement("script");e[c]=function(b){clearTimeout(d);f.removeChild(g);delete e[c];a.onSuccess.call(void 0,b)};g.src=a.url.replace(/=\?/,"="+c);a.onError&&(g.onerror=function(){clearTimeout(d);
a.onError.call(void 0,"","error")});f.appendChild(g);0<a.timeout&&(d=setTimeout(function(){a.onError.call(void 0,"","timeout")},a.timeout));return{}};UMC.ajax=function(a){var c;try{var d=a||{},g;for(g in m)"undefined"==typeof d[g]&&(d[g]=m[g]);d.url||(d.url=e.location);d.contentType||(d.contentType="application/x-www-form-urlencoded");d.headers||(d.headers={});if(!("asynchronous"in d)||!1!==d.asynchronous)d.asynchronous=!0;if(d.responseType)switch(d.responseType){case "script":d.responseType="text/javascript, application/javascript";
break;case "json":d.responseType="application/json";break;case "xml":d.responseType="application/xml, text/xml";break;case "html":d.responseType="text/html";break;case "text":d.responseType="text/plain";break;default:d.responseType="text/html";break;case "jsonp":return UMC.jsonP(a)}else d.responseType="text/html";"object"===UMC.getType(d.args)&&(d.args=UMC.param(d.args));"get"===d.method.toLowerCase()&&d.args&&(d.url=-1===d.url.indexOf("?")?d.url+("?"+d.args):d.url+("&"+d.args));if(/=\?/.test(d.url))return UMC.jsonP(d);
var k,h=d.context,j=/^([\w-]+:)\/\//.test(d.url)?RegExp.$1:e.location.protocol;c=new e.XMLHttpRequest;c.onreadystatechange=function(){var a=d.responseType;if(4===c.readyState){clearTimeout(k);var f,g=!1;if(200<=c.status&&300>c.status||0===c.status&&"file:"==j){if("application/json"===a&&!/^\s*$/.test(c.responseText))try{f=JSON.parse(c.responseText)}catch(n){g=n}else if("application/xml, text/xml"===a)f=c.responseXML;else if("text/html"==a){if(f=c.responseText,a=f){if("string"==typeof a){var m=b.createElement("div");
m.innerHTML=a;a=m}a=a.getElementsByTagName("script");for(m=0;m<a.length;m++)if(0<a[m].src.length&&!l[a[m].src]){var q=b.createElement("script");q.type=a[m].type;q.src=a[m].src;b.getElementsByTagName("head")[0].appendChild(q);l[a[m].src]=1}else e.eval(a[m].innerHTML)}}else f=c.responseText;0===c.status&&0===f.length&&(g=!0);g?d.onError.call(h,c,"parsererror",g):d.onSuccess.call(h,f,"success",c)}else g=!0,d.onError.call(h,c,"error");d.onComplete.call(h,c,g?"error":"success")}};c.open(d.method,d.url,
d.asynchronous);d.withCredentials&&(c.withCredentials=!0);d.contentType&&(d.headers["Content-Type"]=d.contentType);for(var n in d.headers)c.setRequestHeader(n,d.headers[n]);if(!1===d.beforeSend.call(h,c,d))return c.abort(),!1;0<d.onTimeout&&(k=setTimeout(function(){c.onreadystatechange=f;c.abort();d.onError.call(h,c,"timeout")},d.timeout));c.send(d.args)}catch(s){UMC.log(s)}return c};UMC.get=function(a,c){return UMC.ajax({url:a,onSuccess:c})};UMC.post=function(a,c,b,e){"function"===typeof c&&(b=c,
c={});void 0===e&&(e="html");return UMC.ajax({url:a,method:"POST",args:c,responseType:e,onSuccess:b})};UMC.getJSON=function(a,c,b){"function"===typeof data&&(success=data,data={});return that.ajax({url:a,args:c,onSuccess:b,responseType:"json"})};var g=UMC,h=navigator.userAgent;g.os={};g.os.webkit=h.match(/WebKit\/([\d.]+)/)?!0:!1;g.os.android=h.match(/(Android)\s+([\d.]+)/)||h.match(/Silk-Accelerated/)?!0:!1;g.os.androidICS=g.os.android&&h.match(/(Android)\s4/)?!0:!1;g.os.ipad=h.match(/(iPad).*OS\s([\d_]+)/)?
!0:!1;g.os.iphone=!g.os.ipad&&h.match(/(iPhone\sOS)\s([\d_]+)/)?!0:!1;g.os.webos=h.match(/(webOS|hpwOS)[\s\/]([\d.]+)/)?!0:!1;g.os.touchpad=g.os.webos&&h.match(/TouchPad/)?!0:!1;g.os.ios=g.os.ipad||g.os.iphone;g.os.playbook=h.match(/PlayBook/)?!0:!1;g.os.blackberry=g.os.playbook||h.match(/BlackBerry/)?!0:!1;g.os.blackberry10=g.os.blackberry&&h.match(/Safari\/536/)?!0:!1;g.os.chrome=h.match(/Chrome/)?!0:!1;g.os.opera=h.match(/Opera/)?!0:!1;g.os.fennec=h.match(/fennec/i)?!0:h.match(/Firefox/)?!0:!1;
g.os.ie=h.match(/MSIE 10.0/i)?!0:!1;g.os.supportsTouch=e.DocumentTouch&&b instanceof e.DocumentTouch||"ontouchstart"in e;g.feat={};h=b.documentElement.getElementsByTagName("head")[0];g.feat.nativeTouchScroll="undefined"!==typeof h.style["-webkit-overflow-scrolling"]||g.os.ie;g.feat.cssPrefix=g.os.webkit?"Webkit":g.os.fennec?"Moz":g.os.ie?"ms":g.os.opera?"O":"";g.feat.cssTransformStart=!g.os.opera?"3d(":"(";g.feat.cssTransformEnd=!g.os.opera?",0)":")";g.os.android&&!g.os.webkit&&(g.os.android=!1)})(window,
document);
UMC.register("addon.evt.delegatedEvent",function(e){var b=function(b,e){if(b!==e){if(b.compareDocumentPosition)return 16===(b.compareDocumentPosition(e)&16);if(b.contains&&1===e.nodeType)return b.contains(e);for(;e=e.parentNode;)if(b===e)return!0}return!1};return function(f){if(!(void 0!=f&&Boolean(f.nodeName)&&Boolean(f.nodeType)))throw"UMC.delegatedEvent need an Element as first Parameter";var k={},j=function(j){var l=j.target,m=j.type,g=null;if(b(f,l))for(;l&&l!==f;){if(1==l.nodeType){var g=l.getAttribute("action-type"),
h;if(h=g)h=l,g=k[m]&&k[m][g]?k[m][g]({evt:j,el:h,box:f,data:e.queryToJson(h.getAttribute("action-data")||"")}):!0,h=!1===g;if(h)break}l=l.parentNode}else return!1};return{add:function(b,l,m){k[l]||(k[l]={},e.addEvent(f,l,j));k[l][b]=m},remove:function(b,l){k[l]&&(delete k[l][b],e.isEmptyObj(k[l])&&(delete k[l],e.removeEvent(f,l,j)))}}}});
UMC.register("addon.evt.event",function(){return function(e,b){var f,k;f=document.createEvent("Events");f.initEvent(e,!0,!0,null,null,null,null,null,null,null,null,null,null,null,null);if(b)for(k in b)f[k]=b[k];return f}});UMC.register("addon.evt.trigger",function(e){return function(b,f,k,j){"string"===e.getType(f)&&(f=e.addon.evt.event(f,j));f.data=k;return b.dispatchEvent(f)}});
UMC.register("addon.evt.gestures",function(e){var b,f;b=/WebKit\/([\d.]+)/;f={Android:/(Android)\s+([\d.]+)/,ipad:/(iPad).*OS\s([\d_]+)/,iphone:/(iPhone\sOS)\s([\d_]+)/,blackberry:/(BlackBerry).*Version\/([\d.]+)/,blackberryPlaybook:/(PlayBook).*Version\/([\d.]+)/,webos:/(webOS|hpwOS)[\s\/]([\d.]+)/};return function(){var k,j,n,l,m,g;k=null;g=function(){k=k||n();return k.isMobile};j=function(a){var c;return(c=a.match(b))?c[0]:a};l=function(a){var c,b,d;c=null;for(b in f)if(d=a.match(f[b])){c={name:"iphone"===
b||"ipad"===b?"ios":b,version:d[2].replace("_",".")};break}return c};m=function(){return{width:window.innerWidth,height:window.innerHeight}};n=function(){var a,c;c=navigator.userAgent;a={};a.browser=j(c);a.os=l(c);a.isMobile=!!a.os;a.screen=m();return a};var h,a,c,d,q,t,y,z,r,s,u,v,A,w,B,C,D,E,F,x,p;c={};a=[];h=[];q=void 0;var G={};d="doubleTap hold swipe swiping swipeLeft swipeRight swipeUp swipeDown rotate rotating rotateLeft rotateRight pinch pinching pinchIn pinchOut drag dragLeft dragRight dragUp dragDown".split(" ");
G.add=function(a,c,b){"touch"===c?e.addEvent(a,"touchstart",b):"tap"==c&&e.addEvent(a,"click",b);for(var f=0;f<d.length;f++)if(c===d[f]&&"function"===e.getType(b)){e.addEvent(a,d[f],b);break}};B=function(){var a=document.body,c=g()?"touchstart":"mousedown",b=g()?"touchmove":"mousemove",d=g()?"touchend":"mouseup";e.addEvent(a,c,E);e.addEvent(a,b,D);e.addEvent(a,d,C);e.addEvent(a,"touchcancel",r);return!0};E=function(b){var d,e,f;e=Date.now();d=e-(c.last||e);q&&clearTimeout(q);f=v(b);b=f.length;a=u(f,
b);c.el=F(f[0].target);c.fingers=b;c.last=e;if(1===b)return c.isDoubleTap=0<d&&250>=d,setTimeout(A,650);if(2===b)return c.initial_angle=parseInt(t(a),10),c.initial_distance=parseInt(s(a),10),c.angle_difference=0,c.distance_difference=0};D=function(a){var b,d;c.el&&(d=v(a),b=d.length,b===c.fingers?(h=u(d,b),w(a)&&p("swiping"),2===b&&(z(),y(),a.preventDefault())):r());return!0};w=function(){var b,d;b=!1;h[0]&&(b=30<Math.abs(a[0].x-h[0].x),d=30<Math.abs(a[0].y-h[0].y),b=c.el&&(b||d));return b};C=function(){var b;
if(c.isDoubleTap)return p("doubleTap"),r();if(1===c.fingers){if(w())return p("swipe"),b=x(a[0].x,h[0].x,a[0].y,h[0].y),p("swipe"+b),r();p("tap");return q=setTimeout(r,250)}if(2===c.fingers){b=!1;0!==c.angle_difference&&(p("rotate",{angle:c.angle_difference}),b=0<c.angle_difference?"rotateRight":"rotateLeft",p(b,{angle:c.angle_difference}),b=!0);0!==c.distance_difference&&(p("pinch",{angle:c.distance_difference}),b=0<c.distance_difference?"pinchOut":"pinchIn",p(b,{distance:c.distance_difference}),
b=!0);if(!b&&h[0]&&(10<Math.abs(a[0].x-h[0].x)||10<Math.abs(a[0].y-h[0].y)))p("drag"),b=x(a[0].x,h[0].x,a[0].y,h[0].y),p("drag"+b);return r()}};u=function(a,b){var c,d;d=[];c=0;for(a=a[0].targetTouches?a[0].targetTouches:a;c<b;)d.push({x:a[c].pageX,y:a[c].pageY}),c++;return d};z=function(){var a,b,d;a=parseInt(t(h),10);a=parseInt(c.initial_angle-a,10);if(20<Math.abs(a)||0!==c.angle_difference){b=0;for(d=0>c.angle_difference?"-":"+";90<Math.abs(a-c.angle_difference)&&10>b++;)eval("diff "+d+"= 180;");
c.angle_difference=parseInt(a,10);return p("rotating",{angle:c.angle_difference})}};y=function(){var a;a=parseInt(s(h),10);a=c.initial_distance-a;if(10<Math.abs(a))return c.distance_difference=a,p("pinching",{distance:a})};p=function(b,d){if(c.el)return d=d||{},h[0]&&(d.iniTouch=1<c.fingers?a:a[0],d.currentTouch=1<c.fingers?h:h[0]),e.addon.evt.trigger(c.el,b,d)};r=function(){a=[];h=[];c={};return clearTimeout(q)};t=function(a){var b;b=a[0];a=a[1];b=Math.atan(-1*(a.y-b.y)/(a.x-b.x))*(180/Math.PI);
return 0>b?b+180:b};s=function(a){var b;b=a[0];a=a[1];return-1*Math.sqrt((a.x-b.x)*(a.x-b.x)+(a.y-b.y)*(a.y-b.y))};v=function(a){return g()?a.touches:[a]};F=function(a){return"tagName"in a?a:a.parentNode};x=function(a,b,c,d){var e,f;e=Math.abs(a-b);f=Math.abs(c-d);return e>=f?0<a-b?"Left":"Right":0<c-d?"Up":"Down"};A=function(){if(c.last&&650<=Date.now()-c.last)return p("hold")};e.domReady(function(){return B()});return G}});
UMC.register("addon.util.storage",function(){var e=window.localStorage;if(e)return{get:function(b){return unescape(e.getItem(b))},set:function(b,f){e.setItem(b,escape(f))},del:function(b){e.removeItem(b)},clear:function(){e.clear()},getAll:function(){for(var b=e.length,f=null,k=[],j=0;j<b;j++)f=e.key(j),k.push(f+"="+e.getItem(f));return k.join("; ")}}});
UMC.register("addon.util.audio",function(){return function(e){var b={};if(void 0!=e&&Boolean(e.nodeName)&&Boolean(e.nodeType))return!1;b.play=function(){e.play()};b.pause=function(){e.pause()};b.paused=function(){return e.paused};return b}});
UMC.register("addon.util.easyTemplate",function(){var e=function(b,f){if(!b)return"";b!==e.template&&(e.template=b,e.aStatement=e.parsing(e.separate(b)));var k=e.aStatement,j=function(b){b&&(f=b);return arguments.callee};j.toString=function(){return(new Function(k[0],k[1]))(f)};return j};e.separate=function(b){var e=/\\'/g;return b.replace(/(<(\/?)#(.*?(?:\(.*?\))*)>)|(')|([\r\n\t])|(\$\{([^\}]*?)\})/g,function(b,j,n,l,m,g,h,a){if(j)return"{|}"+(n?"-":"+")+l+"{|}";if(m)return"\\'";if(g)return"";if(h)return"'+("+
a.replace(e,"'")+")+'"})};e.parsing=function(b){var e,k,j,n,l=["var aRet = [];"];b=b.split(/\{\|\}/);for(var m=/\s/;b.length;)if(j=b.shift())if(n=j.charAt(0),"+"!==n&&"-"!==n)j="'"+j+"'",l.push("aRet.push("+j+");");else switch(j=j.split(m),j[0]){case "+et":e=j[1];k=j[2];l.push('aRet.push("\x3c!--'+e+' start--\x3e");');break;case "-et":l.push('aRet.push("\x3c!--'+e+' end--\x3e");');break;case "+if":j.splice(0,1);l.push("if"+j.join(" ")+"{");break;case "+elseif":j.splice(0,1);l.push("}else if"+j.join(" ")+
"{");break;case "-if":l.push("}");break;case "+else":l.push("}else{");break;case "+list":l.push("if("+j[1]+".constructor === Array){with({i:0,l:"+j[1]+".length,"+j[3]+"_index:0,"+j[3]+":null}){for(i=l;i--;){"+j[3]+"_index=(l-i-1);"+j[3]+"="+j[1]+"["+j[3]+"_index];");break;case "-list":l.push("}}}")}l.push('return aRet.join("");');return[k,l.join("")]};return e});
UMC.register("addon.util.builder",function(e){return function(b,f){var k="string"===typeof b,j=b;k&&(j=e.C("div"),j.innerHTML=b);var n,l;n={};if(f)for(h in selectorList)n[h]=e.query(f[h].toString(),j);else{l=e.query("[node-type]",j);for(var m=0,g=l.length;m<g;m+=1){var h=l[m].getAttribute("node-type");n[h]||(n[h]=[]);n[h].push(l[m])}}l=b;if(k)for(l=e.C("buffer");j.childNodes[0];)l.appendChild(j.childNodes[0]);return{box:l,list:n}}});
UMC.register("addon.io.socket",function(e){return function(b){var f=function(){},k={};b=e.parseParam({url:"",onopen:f,onmessage:f,onclose:f},b);if(void 0===window.WebSocket)return!1;window.MozWebSocket&&(window.WebSocket=window.MozWebSocket);return void 0===k.readyState||1<k.readyState?(k=new WebSocket(b.url),k.onopen=b.onopen,k.onmessage=b.onmessage,k.onclose=b.onclose,k):!1}});
UMC.register("addon.location.geo",function(e){return function(){if(navigator.geolocation)navigator.geolocation.getCurrentPosition(function(b){return{lat:b.coords.latitude,lng:b.coords.longitude}},function(){e.log("The geo info is err")});else return!1}});
